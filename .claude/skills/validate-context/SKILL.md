---
name: validate-context
description: Validates that all required context files (company info, HR processes, team data) exist and are accessible before starting the hiring workflow. Use this before any hiring pipeline operations.
---

# Validate Context

This skill checks that all prerequisite context files exist and are properly structured before running the hiring workflow.

## Instructions

### Step 1: Run Validation Script

**IMPORTANT**: This skill MUST use the existing validation script with uv.

```bash
uv run python scripts/validate_hr_context.py
```

**DO NOT** write inline Python code or create temporary validation scripts. The project has a dedicated, tested validation script.

### Step 2: Handle Validation Results

**If Validation Passes (Exit Code 0):**
- Report success to user
- Proceed to next pipeline stage

**If Validation Fails (Exit Code 1):**
- Parse the error output to identify specific issues
- Handle errors according to severity:

#### Critical Errors (Must Fix Before Proceeding):
1. **Missing Required Directories**
   - Create missing directories automatically:
     ```bash
     mkdir -p artifacts/private
     mkdir -p data/public/hiring/resume
     ```
   - Re-run validation after creation

2. **YAML Syntax Errors**
   - **STOP EXECUTION** - Cannot auto-fix YAML syntax errors
   - Report the exact line numbers and error messages to user
   - Request user to manually fix YAML syntax issues
   - Example: "YAML syntax error in hiring_stages.yaml line 150: expected <block end>, but found '?'"
   - **DO NOT PROCEED** until YAML files are valid

3. **Missing Required Context Files**
   - **STOP EXECUTION** - Cannot proceed without core context
   - Report missing files to user
   - Request user to add missing files

#### Warnings (Can Proceed):
- Missing candidate JSON files: OK during initial setup
- Empty technical problem files: Can be populated later
- Missing interview materials: Will be generated by pipeline

### Step 3: Auto-Fix Common Issues

Before reporting failure, attempt to auto-fix these common issues:

1. **Create Missing Directories:**
   ```bash
   mkdir -p artifacts/private
   mkdir -p artifacts/public/hiring
   mkdir -p data/public/hiring/resume
   ```

2. **Re-run Validation:**
   After auto-fixes, run validation script again to confirm fixes worked

### Step 4: Report Results

Provide clear, actionable output:

**Success Example:**
```
✅ Context Validation PASSED
- All required directories exist
- All YAML files valid
- 10 core values confirmed
- 9 hiring stages confirmed
- Ready for hiring pipeline execution
```

**Failure Example:**
```
❌ Context Validation FAILED

CRITICAL ERRORS (Must fix before proceeding):
1. YAML Syntax Error in context/hr_processes/hiring/hiring_stages.yaml
   - Line 150: expected <block end>, but found '?'
   - Line 187: expected <block end>, but found '?'

   ACTION REQUIRED: Please manually fix YAML syntax errors in hiring_stages.yaml
   The pipeline cannot proceed until these are resolved.

2. Missing: context/company_info/mission_vision_values.yaml
   ACTION REQUIRED: Add this required file to proceed.

AUTO-FIXED:
✅ Created missing directory: artifacts/private

WARNINGS (Can proceed):
⚠️  No candidate JSON files found (OK for initial setup)
```

## Quality Gates

- ✅ All required context files exist
- ✅ All YAML files are valid and parseable
- ✅ Core values count = 10
- ✅ Competency count = 4
- ✅ Workflow and prompt files exist

## Examples

```bash
# Success scenario
✅ context/company_info/mission_vision_values.yaml (10 values)
✅ context/company_info/hybrid_competency_framework.yaml (4 competencies)
✅ context/hr_processes/hiring/hiring_stages.yaml (9 stages)
✅ ai_docs/workflows/hiring/orchestrator.md
✅ All context files validated successfully
```

```bash
# Failure scenario
❌ Missing: context/company_info/mission_vision_values.yaml
⚠️  Invalid YAML: context/hr_processes/hiring/hiring_stages.yaml
❌ Context validation failed
```
